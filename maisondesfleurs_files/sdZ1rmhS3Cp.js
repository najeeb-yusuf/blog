if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("PolarisCommentLikeListsActions",["PolarisCommentLikeListsActionTypes","PolarisCommentLikeListsState","PolarisPaginationUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h="5f0b1f6281e72053cbc07909c8d154ae",i=24,j=1;function a(){return d("PolarisPaginationUtils").generatePaginationActionCreators({pageSize:i,pagesToPreload:j,getState:function(a,b){return a.commentLikeLists.get(b,d("PolarisCommentLikeListsState").EMPTY_LISTS).pagination},queryId:h,queryParams:function(a){return{comment_id:a}},onUpdate:function(a,b,e){b=b&&c("nullthrows")(b.comment).edge_liked_by;return{type:d("PolarisCommentLikeListsActionTypes").COMMENT_LIKE_LISTS_REQUEST_UPDATED,fetch:a,commentId:e,count:b==null?void 0:b.count,users:((b==null?void 0:b.edges)||[]).map(function(a){return a.node}),pageInfo:b==null?void 0:b.page_info}},onError:function(a,b,c){return{type:d("PolarisCommentLikeListsActionTypes").COMMENT_LIKE_LISTS__REQUEST_FAILED,fetch:b,commentId:c}}})}b=a();e=b;f=b.first;a=b.next;g._actionCreators=e;g.requestCommentLikes=f;g.requestNextCommentLikes=a}),98);
__d("PolarisPostRemoveCommentsSelectors",["reselect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.postRemoveComments}b=d("reselect").createSelector(a,function(a){a=a.isVisible;return a});g.getPostRemoveCommentsIsVisible=b}),98);
__d("PolarisPreviewComments",["cx","fbt","PolarisBatchDOM","PolarisCommentActionTypes","PolarisCommentActions","PolarisConsumerBigNumber","PolarisIGCoreButton","PolarisIGCoreSpinner","PolarisInteractionsLogger","PolarisLinkBuilder","PolarisNavigationActions","PolarisPostComment","PolarisPostVariants","PolarisUA","PolariscommentSelectors","PolarispostSelectors","browserHistory","joinClasses","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=function(a){var b=c.props,e=b.analyticsContext,f=b.code,g=b.id,h=b.loadMore,i=b.loggedIn,j=b.mediaType,k=b.onLoggedOutIntentClick,l=b.ownerId;b=b.variant;var m=d("PolarisUA").isMobile();a.preventDefault();if(b===d("PolarisPostVariants").VARIANTS.feed||m){a=d("PolarisLinkBuilder").buildMediaCommentsLink(f,m);i?(d("browserHistory").browserHistory.push(a),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_all",mediaAuthorId:l,mediaId:g,mediaType:j})):k("post_comment_view_all")}else h(g,f),d("PolarisInteractionsLogger").logInteractionAction({containerModule:e,eventName:"instagram_organic_comment_view_more",mediaAuthorId:l,mediaId:g,mediaType:j})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a,b,c){var e=this,f=a.commentSaveIsInFlight&&!this.props.commentSaveIsInFlight,g=this.$1;if(!g)return;d("PolarisBatchDOM").measure(function(){var b=g.scrollTop;f?b=g.scrollHeight:c!=null?b=g.scrollHeight-c:e.props.id!==a.id&&(b=0);d("PolarisBatchDOM").mutate(function(){g.scrollTop=b})})};e.getSnapshotBeforeUpdate=function(a){var b=a.comments,c=this.props.comments;if(a.id===this.props.id&&c&&b&&c.count()>b.count()){a=this.$1;if(a)return a.scrollHeight-a.scrollTop}return null};e.render=function(){var a=this,b=this.props,e=b.analyticsContext,f=b.captionAndTitle,g=b.captionIsEdited,h=b.className,i=b.commentsAreStacked,k=b.commentsDisabled,l=b.commentsHasNextPage,m=b.commentsTotalCount,n=b.handleDeleteCommentClick,o=b.id,p=b.loggedIn,q=b.mediaType,r=b.ownerId,s=b.postedAt,t=b.previewComments,u=b.showIGTVCaption,v=b.showRemoveCommentIcons,w=b.variant;b=k!==!0&&(l===!0||t!=null&&t.length<m);if((f==null||f==="")&&m===0&&!b)return null;l=t;return j.jsx("div",{className:c("joinClasses")("_acri"+(!d("PolarisUA").isMobile()&&w===d("PolarisPostVariants").VARIANTS.flexible&&!i?" _acrj":""),h),ref:function(b){return a.$1=b},children:j.jsxs("ul",{className:"_acrk",children:[f!=null&&f!==""&&j.jsx(c("PolarisPostComment"),{analyticsContext:e,commentOwnerId:r,isCaption:!0,isEdited:!!g,isRestrictedPending:!1,loggedIn:p,mediaType:q,postedAt:s,postId:o,postOwnerId:r,showIGTVCaption:u,showRemoveIcon:!1,text:f,variant:w},"captionAndTitle"),b&&this.renderLoadMoreCommentsLink(),k!==!0&&l&&l.map(function(a){return j.jsx(c("PolarisPostComment"),{analyticsContext:e,commentOwnerId:a.userId,id:a.id,isAuthorVerified:a.isAuthorVerified,isRestrictedPending:a.isRestrictedPending,likedByViewer:a.likedByViewer,loggedIn:p,mediaType:q,onDeleteCommentClick:n,postedAt:a.postedAt,postId:o,postOwnerId:r,showRemoveIcon:v,text:a.text,variant:w},a.id)})]})})};e.renderLoadMoreCommentsLink=function(){var a=this.props,b=a.comments,e=a.commentsIsFetching,f=a.commentsTotalCount;a=a.variant;var g=i._("Load more comments");b&&b.count()+d("PolarisCommentActionTypes").PAGE_SIZE>=f||a===d("PolarisPostVariants").VARIANTS.feed||d("PolarisUA").isMobile()?b=i._("View all {count} comments",[i._param("count",j.jsx(c("PolarisConsumerBigNumber"),{value:f}))]):b=g;return j.jsxs("li",{className:"_acrl",children:[j.jsx(c("PolarisIGCoreButton"),{borderless:!0,dangerouslySetClassName:{__className:"_acrm"},disabled:e,onClick:this.$2,children:b}),e&&j.jsx("div",{className:"_acrn",children:j.jsx(c("PolarisIGCoreSpinner"),{position:"static",size:"small"})})]})};return b}(j.PureComponent);function a(a,b){var c=d("PolariscommentSelectors").getPreviewCommentsForPostId(a,b.id);b=d("PolarispostSelectors").getNumCommentsForPostId(a,b.id);var e=a.navigation.pageIdentifier||"";return{analyticsContext:e,commentSaveIsInFlight:!1,commentsHasNextPage:!1,commentsIsFetching:!1,commentsTotalCount:b,previewComments:c,viewportWidth:a.displayProperties.viewportWidth}}e={onLoggedOutIntentClick:d("PolarisNavigationActions").openLoggedOutIntentDialog,loadMore:d("PolarisCommentActions").requestNextCommentPage};f=d("react-redux-wwwig").connect(a,e)(b);g["default"]=f}),98);
__d("PolarisPostComments",["PolarisDeleteCommentModal.react","PolarisPostRemoveCommentsSelectors","PolarisPostVariants","PolarisPreviewComments","PolarisThreadedComments","PolarisUA","PolarisuserSelectors","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={commentToDeleteId:null,showDeleteCommentModal:!1},c.$1=function(a){c.setState({commentToDeleteId:a,showDeleteCommentModal:!0})},c.$2=function(){c.setState({commentToDeleteId:null,showDeleteCommentModal:!1})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.$3=function(){var a=this.props,b=a.caption,c=a.showIGTVCaption;a=a.title;return c?[a,b].filter(Boolean).join("\n\n"):b};e.$4=function(){return this.props.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile()};e.render=function(){var a=this.props,b=a.analyticsContext,d=a.captionCreatedAt,e=a.captionIsEdited,f=a.className,g=a.code,i=a.commentingDisabledForViewer,j=a.commentsAreStacked,k=a.commentsDisabled,l=a.customIndentationPadding,m=a.hasRankedComments,n=a.hideUserAvatar,o=a.id,p=a.mediaType,q=a.onLikeCountClick,r=a.onLikeModalClose,s=a.ownerId,t=a.permalinkedCommentId,u=a.permalinkedReplyId,v=a.postedAt,w=a.reducedAvatarMargin,x=a.showCommentOptionsInline,y=a.showIGTVCaption,z=a.showRemoveCommentIcons,A=a.variant;a=a.viewerId;a=a!=null;return h.jsxs(h.Fragment,{children:[this.$4()?h.jsx(c("PolarisThreadedComments"),{analyticsContext:b,captionAndTitle:this.$3(),captionCreatedAt:d,captionIsEdited:e,className:f,code:g,commentingDisabledForViewer:i,commentsDisabled:k,customIndentationPadding:l,handleDeleteCommentClick:this.$1,hasRankedComments:m,hideUserAvatar:!!n,id:o,isDeletingComments:z,loggedIn:a,mediaType:p,onLikeCountClick:q,onLikeModalClose:r,ownerId:s,permalinkedCommentId:t,permalinkedReplyId:u,postedAt:v,reducedAvatarMargin:w,showCommentOptionsInline:x,showIGTVCaption:y}):h.jsx(c("PolarisPreviewComments"),{captionAndTitle:this.$3(),captionIsEdited:e,className:f,code:g,commentsAreStacked:j,commentsDisabled:k,handleDeleteCommentClick:this.$1,id:o,loggedIn:a,mediaType:p,ownerId:s,postedAt:v,showIGTVCaption:y,showRemoveCommentIcons:z,variant:A}),this.state.showDeleteCommentModal&&h.jsx(c("PolarisDeleteCommentModal.react"),{analyticsContext:b,commentId:c("nullthrows")(this.state.commentToDeleteId),onClose:this.$2,postId:o})]})};return b}(h.PureComponent);b.defaultProps={variant:d("PolarisPostVariants").VARIANTS.flexible};function a(a,b){return{showRemoveCommentIcons:d("PolarisPostRemoveCommentsSelectors").getPostRemoveCommentsIsVisible(a),viewerId:(b=d("PolarisuserSelectors").getViewer(a))==null?void 0:b.id}}e=d("react-redux-wwwig").connect(a)(b);g["default"]=e}),98);